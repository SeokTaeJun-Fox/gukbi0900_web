<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <p id="result"></p>
</body>
<script>
  // https://jsonplaceholder.typicode.com/todos
  // todos의 데이터 중 완료되지 않은 것 중
  // title에 "q"와 "p"가 들어간 타이틀을 조회. 해당 타이틀 뒤에서 5번째 글자를 가져오기
  // 글자 중 가장 많은 알파벳을 result에 출력하기

  const loadAndProcess = async () => {
    const response = await fetch("https://jsonplaceholder.typicode.com/todos");
    const dataList = await response.json();
    console.log(dataList);

    const newList = dataList.filter((data) => !data.completed && (data.title.includes("p") || data.title.includes("q"))).map((data) => data.title);  //p, q가들어간 타이틀 조회
    const resultList = newList.map((data) => data.split("").slice(-5, -4)); //5번째 글자를 가져오기
    const str = resultList.sort().join("").replaceAll(" ",""); 
    const arrayStr = str.split("");

    console.log(str);

    let chars = ""; //비교하려는 문자목록
    arrayStr.forEach((char) => {
      if(!chars.includes(char))
      {
        chars += char;
      }
    })

    //chars = chars.replace(" ", ""); //공백은 비교대상이 아니다

    let manyChar = chars[0];
    let many = str.split(chars[0]).length - 1;

    let charsArray = chars.split("");
    console.log(charsArray);
    charsArray.forEach((data) => {
      const curChar = data;
      const curMany = str.split(data).length - 1;
      
      if(curMany > many)
      {
        manyChar = curChar;
        many = curMany;
      }
    })

    console.log(`많은 문자 : ${manyChar}, 갯수 : ${many}`);
  }

  loadAndProcess();
</script>
</html>