<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>체크박스</title>
</head>
<body>
  <form action="#">
    <div>
      <label>
        <span>전체 동의</span>
        <input type="checkbox" name="all" class="all">
      </label>
    </div>
    <div>
      <label>
        <span>강의장 청소 동의</span>
        <input type="checkbox" name="term1" class="term">
      </label>
    </div>
    <div>
      <label>
        <span>이규혁 잔류 동의</span>
        <input type="checkbox" name="term2" class="term">
      </label>
    </div>
    <div>
      <label>
        <span>강대훈 잔류 동의</span>
        <input type="checkbox" name="term3" class="term">
      </label>
    </div>
    <div>
      <label>
        <span>김세종 잔류 동의</span>
        <input type="checkbox" name="term4" class="term">
      </label>
    </div>
  </form>
</body>
<script>
  const all = document.querySelector("input.all")
  const terms = document.querySelectorAll("input.term")

  NodeList.prototype.some = Array.prototype.some;

  all.addEventListener("click", (e) => {
    terms.forEach((term) => {
      // 전체 동의를 체크하면 나머지 체크박스 모두 체크 상태로 변경
      // 전체 동의를 상태를 체크 해제하면 나머지 체크박스 모두 체크해제
      term.checked = all.checked;
    })
  })

  terms.forEach((term) => {
    term.addEventListener("click", (e) => {
      // 모두 체크가 동의되면 전체 동의도 체크
      // 하나라도 체크가 해제된다면 전체 동의도 체크 해제
      
      // let checkCount = 0;
      // terms.forEach((term) => {
      //   checkCount = term.checked ? checkCount + 1 : checkCount;
      // })

      // if(checkCount == 4)
      // {
      //   all.checked = true;
      // }
      // else
      // {
      //   all.checked = false;
      // }
      //다른 풀이
      all.checked = !terms.some((term) => !term.checked);
      //all.checked = terms.map((term) => term.checked).filter((check) => check).length === 4;
    })
  })

  



</script>
</html>